<!DOCTYPE html>
<html lang="en-US" prefix="og: http://ogp.me/ns#">
<head>
   
<meta charset="UTF-8" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />


<title>Adding custom admin pages on django - Pablo Leano Martinet</title>

<link rel="stylesheet" href="http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/style.css" media="screen" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.2, user-scalable=yes" />

<!--[if IE 8]>
    <script src="http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/scripts/html5.js" type="text/javascript"></script>
    <script src="http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/scripts/selectivizr-min.js" type="text/javascript"></script>
<![endif]-->


<!-- This site is optimized with the Yoast WordPress SEO plugin v1.7.1 - https://yoast.com/wordpress/plugins/seo/ -->
<meta name="description" content="A short example on how to add custom listing pages on the django default admin site"/>
<link rel="canonical" href="http://www.pabloleanomartinet.com/adding-custom-admin-pages-django/" />
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Adding custom admin pages on django - Pablo Leano Martinet" />
<meta property="og:description" content="A short example on how to add custom listing pages on the django default admin site" />
<meta property="og:url" content="http://www.pabloleanomartinet.com/adding-custom-admin-pages-django/" />
<meta property="og:site_name" content="Pablo Leano Martinet" />
<meta property="article:tag" content="django" />
<meta property="article:section" content="Posts" />
<meta property="article:published_time" content="2015-03-24T22:28:38+00:00" />
<meta property="article:modified_time" content="2015-03-24T22:30:00+00:00" />
<meta property="og:updated_time" content="2015-03-24T22:30:00+00:00" />
<meta property="og:image" content="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/default_users.png" />
<meta property="og:image" content="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/inactive_users.png" />
<!-- / Yoast WordPress SEO plugin. -->

<link rel="alternate" type="application/rss+xml" title="Pablo Leano Martinet &raquo; Feed" href="http://www.pabloleanomartinet.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="Pablo Leano Martinet &raquo; Comments Feed" href="http://www.pabloleanomartinet.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Pablo Leano Martinet &raquo; Adding custom admin pages on django Comments Feed" href="http://www.pabloleanomartinet.com/adding-custom-admin-pages-django/feed/" />
<link rel='stylesheet' id='bootstrap.min-css'  href='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/css/bootstrap.min.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='bootstrap.theme.min-css'  href='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/css/bootstrap.theme.min.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome.min-css'  href='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/css/font-awesome.min.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='prettyPhoto-css'  href='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/css/prettyPhoto.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='template-css'  href='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/css/template.css?ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='google-fonts-css'  href='//fonts.googleapis.com/css?family=Raleway%3A900%7CFjalla+One%7CRoboto+Slab%3A400%2C300%2C100%2C700&#038;ver=4.0.1' type='text/css' media='all' />
<link rel='stylesheet' id='A2A_SHARE_SAVE-css'  href='http://www.pabloleanomartinet.com/wp-content/plugins/add-to-any/addtoany.min.css?ver=1.9' type='text/css' media='all' />
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.pabloleanomartinet.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.pabloleanomartinet.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.0.1" />
<link rel='shortlink' href='http://www.pabloleanomartinet.com/?p=123' />

<script type="text/javascript"><!--
var a2a_config=a2a_config||{},wpa2a={done:false,html_done:false,script_ready:false,script_load:function(){var a=document.createElement('script'),s=document.getElementsByTagName('script')[0];a.type='text/javascript';a.async=true;a.src='http://static.addtoany.com/menu/page.js';s.parentNode.insertBefore(a,s);wpa2a.script_load=function(){};},script_onready:function(){if(a2a.type=='page'){wpa2a.script_ready=true;if(wpa2a.html_done)wpa2a.init();}},init:function(){for(var i=0,el,target,targets=wpa2a.targets,length=targets.length;i<length;i++){el=document.getElementById('wpa2a_'+(i+1));target=targets[i];a2a_config.linkname=target.title;a2a_config.linkurl=target.url;if(el){a2a.init('page',{target:el});el.id='';}wpa2a.done=true;}wpa2a.targets=[];}};a2a_config.tracking_callback=['ready',wpa2a.script_onready];
//--></script>
<style type="text/css"><br />
<b>Notice</b>:  Undefined variable: logostyle in <b>/var/www/pabloleanomartinet.com/prod/wp-content/themes/diarjo-lite/core/functions/style.php</b> on line <b>16</b><br />
#header, #footer, #sidebar .post-article, #back-to-top i, nav#mainmenu ul ul, #wp-calendar { background-color: #2D3032; } #sidebar h3.title, #sidebar a, #sidebar p, #sidebar li, #sidebar address,
#sidebar dd, #sidebar blockquote, #sidebar td, #sidebar th, #sidebar label, #sidebar .textwidget, #footer h3.title, #footer a, #footer p, #footer li, #footer address,
#footer dd, #footer blockquote, #footer td, #footer th, #footer label, #footer .textwidget, nav#mainmenu ul li a, #back-to-top i, #wp-calendar caption, #wp-calendar td a, #footer h4.title, #logo a, nav#widgetmenu li a { color: #ffffff; } nav#mainmenu ul ul li:last-of-type a, #searchform input[type=submit], .contact-form input[type=submit], #commentform input[type=submit], #sidebar li, #footer li, #footer .widgets, ul.widget-category, ul.widget-category li a, ul.contact-info li, .bottom_widget ul.contact-info li, .tagcloud a, .socials a, #back-to-top i, nav#mainmenu ul li a, #sidebar ul.children, #sidebar ul.sub-menu, #wp-calendar th, #wp-calendar td, nav#widgetmenu ul, nav#widgetmenu li a, nav#widgetmenu li:last-of-type a, nav#widgetmenu li:last-of-type a:hover, #sidebar li, #footer li, #sidebar ul.children, #sidebar ul.children, #footer ul.sub-menu, #sidebar ul.sub-menu { border-color: #444649; } ::-moz-selection { background-color: #48c9b0; } ::selection { background-color: #48c9b0; } .skills .views, .filter, #searchform input[type=submit], .contact-form input[type=submit], #commentform input[type=submit]{ background-color: #48c9b0; } .skills .views, .filter, #searchform input[type=submit], .contact-form input[type=submit], #commentform input[type=submit] { border-color: #48c9b0; } #subheader, nav#mainmenu ul li a:hover,nav#mainmenu li:hover > a, nav#mainmenu ul li.current-menu-item > a, nav#mainmenu ul li.current_page_item > a, nav#mainmenu ul li.current-menu-parent > a, nav#mainmenu ul li.current_page_ancestor > a, nav#mainmenu ul li.current-menu-ancestor > a, #back-to-top i.open, #back-to-top i:hover, .post-article .link a:hover, .post-article .quote:hover, .filter li:hover, .filter li.active, ul.widget-category li a:hover, #wp-calendar #today, #wp-calendar #today a, .tagcloud a:hover, .tabs li a:hover, .tabs li.ui-tabs-active a, .tabs li.ui-state-active a, .toggle_container h5.element:hover, .toggle_container h5.inactive, .toggle_container h5.inactive:hover, .socials a:hover, .wp-pagenavi a:hover, .wp-pagenavi span.current, .wip-pagination span, .wip-pagination span:hover, #searchform input[type=submit]:hover, .contact-form input[type=submit]:hover, #commentform input[type=submit]:hover, .skills .views.active, .skills .views:hover, .theme-default .nivo-directionNav a:hover, .flexslider:hover .flex-next:hover, .flexslider:hover .flex-prev:hover, nav#widgetmenu li a:hover, nav#widgetmenu li:hover > a , nav#widgetmenu li.current-menu-item > a, nav#widgetmenu li.current-menu-ancestor > a { background-color: #1abc9c; } a.more:hover, a:hover, #footer a:hover, #sidebar a:hover, .post-article .title a:hover, .post-info a:hover, .filterable-grid  h4.title a:hover, .filterable-grid  h4.title a:focus, #logo a:hover, #footer a:hover { color: #1abc9c; } nav#mainmenu ul li a:hover,nav#mainmenu li:hover > a,nav#mainmenu ul li.current-menu-item > a, nav#mainmenu ul li.current_page_item > a, nav#mainmenu ul li.current-menu-parent > a, nav#mainmenu ul li.current_page_ancestor > a, nav#mainmenu ul li.current-menu-ancestor > a, nav#mainmenu ul ul li:last-of-type a:hover, nav#mainmenu ul ul li:last-of-type:hover > a, nav#mainmenu ul ul li.current-menu-item > a, nav#mainmenu ul ul li.current_page_item > a, nav#mainmenu ul ul li.current-menu-parent > a, nav#mainmenu ul ul li.current_page_ancestor > a, nav#mainmenu ul ul li.current-menu-ancestor > a, #back-to-top i.open, #back-to-top i:hover, ul.widget-category li a:hover, .tagcloud a:hover, .toggle_container h5.element:hover, .toggle_container h5.inactive, .toggle_container h5.inactive:hover, .toggle_container h5.element:hover:last-of-type, .toggle_container h5.inactive:last-of-type, .toggle_container h5.inactive:hover:last-of-type, .socials a:hover, #searchform input[type=submit]:hover, .contact-form input[type=submit]:hover, #commentform input[type=submit]:hover, nav#widgetmenu li a:hover, nav#widgetmenu li:hover > a , nav#widgetmenu li.current-menu-item > a, nav#widgetmenu li.current-menu-ancestor > a { border-color: #1abc9c; } </style>
</head>

<body class="single single-post postid-123 single-format-standard custom-background custombody" >

<header id="header">

    <div class="container">
    
        <div class="row">
        
        	<div class="col-md-12">
            
            	<div id="logo">
                
                    <a href="http://www.pabloleanomartinet.com" title="Pablo Leano Martinet">
                            
                        Pablo Leano Martinet                                
                    </a>
                
                </div>
				
                <nav id="mainmenu" >
               
                	<ul id="menu-menu-1" class="menu"><li id="menu-item-70" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-70"><a href="http://www.pabloleanomartinet.com/">Home Page</a></li>
<li id="menu-item-72" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-72"><a href="http://www.pabloleanomartinet.com/category/posts/">Posts</a></li>
<li id="menu-item-73" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-73"><a href="http://www.pabloleanomartinet.com/category/project/">Projects</a></li>
<li id="menu-item-79" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-79"><a href="http://www.pabloleanomartinet.com/about-me/">About Me</a></li>
</ul>                
                </nav> 
				
                <div class="clear"></div>
            
            </div>
            
        </div>
        
    </div>
    
</header>
<div class="container">
	
    <div class="row">
       
        <div class="col-md-12 full">
        	
            <div class="row">
        
                <article class="post-123 post type-post status-publish format-standard hentry category-posts tag-django post-container col-md-12" >
                    
                    			
            <div class="post-article post-title">	
                <h1 class="title icon-title"> 
                	Adding custom admin pages on django                	<span><i class="fa fa-pencil-square-o"></i></span>
                </h1>
			</div>
            
		    
<div class="post-article">

	
    	<div class="line"> <span> On March 24, 2015 by pablo </span> </div>

	<p>The other day I was asked to add a new page on the admin site of django that was like a list view for a model but with different actions, different columns to display and with a filter applied to the list. After hours of searching on the docs I ended up reading the source code of the contrib.admin package to understand how to do it.</p>
<p>Feel free to skip all this text and inspect the code directly on github</p>
<p class="text-center"><a href="https://github.com/pleasedontbelong/django-admin-view-example" class="btn btn-success">Source Code</a></p>
<h2>The goal</h2>
<p>Let&#8217;s use the user model to create a new view on the admin. In this new view we want to display only the list of inactive users that are not admins of the site. And in this view we want to display the emails, date joined and last login. BUT we also want to keep our complete users page.</p>
<p>We&#8217;ll need une view <strong>/users/</strong> to display the complete list and <strong>/users/inactive/</strong> to display only the inactive users</p>
<h2>The code</h2>
<h3>Admin.py</h3>
<p>This is where we customize the admin pages. It&#8217;s a single file</p>
<div style="font-size: 12px; line-height: 1.3em;"><div class="wrap_githubgist" style="width:100%"><script src = "http://gist-it.sudarmuthu.com/github/pleasedontbelong/django-admin-view-example/blob/master/django_admin_pages%2Fapps%2Fbase%2Fadmin.py?footer=minimal"></script></div></div>
<h3>The custom views</h3>
<p>I wanted to separate the code and have the admin views in a different file but you could put it in the <strong>admin.py</strong> file too</p>
<div style="font-size: 12px; line-height: 1.3em;"><div class="wrap_githubgist" style="width:100%"><script src = "http://gist-it.sudarmuthu.com/github/pleasedontbelong/django-admin-view-example/blob/master/django_admin_pages%2Fapps%2Fbase%2Fadmin_views.py?footer=minimal"></script></div></div>
<h2>The result</h2>
<h3>The default users list view</h3>
<p class="text-center">
    <a href="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/default_users.png" target="_blank"><br />
        <img width="100%" src="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/default_users.png" alt="Default user list view on django"><br />
    </a>
</p>
<h3>The custom users list view</h3>
<p class="text-center">
    <a href="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/inactive_users.png" target="_blank"><br />
        <img width="100%" src="http://d3f79bc9m1q83t.cloudfront.net/djangocustomadmin/inactive_users.png" alt="Custom list view of users"><br />
    </a>
</p>
<h2>Final Notes</h2>
<p>I tried and tried and searched and read the docs, and I wasn&#8217;t able to find a way to add a custom link on the index page of the admin (without installing another package that manages the admin). If you are using django-suit you could add a custom link on the sidebar</p>
<p>When you are customizing your admin site, you end up writing a lot of code inside the <strong>admin.py</strong> file and it might get dirty. It&#8217;s better to separate your code in multiple files. I also tried to create an admin submodule that works fine on production, but not in the unit tests (because of the admin registry)</p>
<p>Hope this helps</p>
<div class="addtoany_share_save_container addtoany_content_bottom"><div class="a2a_kit a2a_kit_size_32 addtoany_list a2a_target" id="wpa2a_1"><a class="a2a_button_facebook" href="http://www.addtoany.com/add_to/facebook?linkurl=http%3A%2F%2Fwww.pabloleanomartinet.com%2Fadding-custom-admin-pages-django%2F&amp;linkname=Adding%20custom%20admin%20pages%20on%20django" title="Facebook" rel="nofollow" target="_blank"></a><a class="a2a_button_twitter" href="http://www.addtoany.com/add_to/twitter?linkurl=http%3A%2F%2Fwww.pabloleanomartinet.com%2Fadding-custom-admin-pages-django%2F&amp;linkname=Adding%20custom%20admin%20pages%20on%20django" title="Twitter" rel="nofollow" target="_blank"></a><a class="a2a_button_google_plus" href="http://www.addtoany.com/add_to/google_plus?linkurl=http%3A%2F%2Fwww.pabloleanomartinet.com%2Fadding-custom-admin-pages-django%2F&amp;linkname=Adding%20custom%20admin%20pages%20on%20django" title="Google+" rel="nofollow" target="_blank"></a><a class="a2a_dd addtoany_share_save" href="https://www.addtoany.com/share_save"></a>
<script type="text/javascript"><!--
wpa2a.script_load();
//--></script>
</div></div><div class="clear"></div>        <div class="post-info">
            <div class="left"> <a href="http://www.pabloleanomartinet.com/category/posts/" rel="category tag">Posts</a> </div>
            <div class="right"> Tags: <a href="http://www.pabloleanomartinet.com/tag/django/" rel="tag">django</a>  </div>
        </div>
            
        <div class="clear"></div>

    

</div>                        
                    <div style="clear:both"></div>
                    
                </article>
        
                
<div id="disqus_thread">
    </div>


			</div>
        
        </div>

		
        <div class="clear"></div>

           
    </div>
    
</div>

<div id="back-to-top"> <i class="fa fa-chevron-up"></i> </div>

<footer id="footer">
	
    <div class="container">

		        
			<section class="row widgets">
                    
				<div class="col-md-4 widget-box"><h4 class="title">Categories</h4>		<ul>
	<li class="cat-item cat-item-2"><a href="http://www.pabloleanomartinet.com/category/posts/" >Posts</a> (8)
</li>
	<li class="cat-item cat-item-15"><a href="http://www.pabloleanomartinet.com/category/project/" >Project</a> (2)
</li>
		</ul>
</div>                    
            </section>
                
        
        <div class="row" >
             
			<div class="col-md-12" >

                <div class="copyright">

                    <p>
                                                  Copyright Pablo Leano Martinet 2015 
                         
                        | Theme by <a href="http://www.themeinprogress.com/" target="_blank">Theme in Progress</a> |
                        <a href="http://wordpress.org/" title="A Semantic Personal Publishing Platform" rel="generator">Proudly powered by WordPress</a>
                    
                    </p>

				</div>
                
                
                <div class="clear"></div>
                
			</div>
                
		</div>
        
	</div>
    
</footer>


<script type="text/javascript"><!--
wpa2a.targets=[
{title:'Adding custom admin pages on django',url:'http://www.pabloleanomartinet.com/adding-custom-admin-pages-django/'}];
wpa2a.html_done=true;if(wpa2a.script_ready&&!wpa2a.done)wpa2a.init();wpa2a.script_load();
//--></script>
<!-- Tracking code easily added by NK Google Analytics -->
<script type="text/javascript"> 
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ 
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), 
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) 
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); 
ga('create', 'UA-12714966-2', 'pabloleanomartinet.com'); 
ga('send', 'pageview'); 
</script> 
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/comment-reply.min.js?ver=4.0.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/jquery/ui/jquery.ui.core.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/jquery/ui/jquery.ui.widget.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-includes/js/jquery/ui/jquery.ui.tabs.min.js?ver=1.10.4'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/js/jquery.easing.1.3.js?ver=4.0.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/js/jquery.prettyPhoto.js?ver=4.0.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/js/jquery.scrollTo.js?ver=4.0.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/js/jquery.tinynav.js?ver=4.0.1'></script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/themes/diarjo-lite/js/jquery.wip.js?ver=4.0.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var embedVars = {"disqusConfig":{"platform":"wordpress@4.0.1","language":""},"disqusIdentifier":"123 http:\/\/www.pabloleanomartinet.com\/?p=123","disqusShortname":"pleasedontbelong","disqusTitle":"Adding custom admin pages on django","disqusUrl":"http:\/\/www.pabloleanomartinet.com\/adding-custom-admin-pages-django\/","options":{"manualSync":false},"postId":"123"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/plugins/disqus-comment-system/media/js/disqus.js?ver=4.0.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var countVars = {"disqusShortname":"pleasedontbelong"};
/* ]]> */
</script>
<script type='text/javascript' src='http://www.pabloleanomartinet.com/wp-content/plugins/disqus-comment-system/media/js/count.js?ver=4.0.1'></script>
  
 
</body>

</html>